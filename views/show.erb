<div id="show-page" ng-controller="ShowController">
  <div ng-show="offset">
    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-12 col-sm-4 sidebar">
          <h4>
            Presets
            <a href="#" class="btn btn-success btn-xs pull-right" ng-click="editPreset()">
              <i class="glyphicon glyphicon-plus" aria-hidden="true"></i>
              New Preset
            </a>
          </h4>

          <ul class="nav nav-sidebar" on-tap-hold-add-class="sorting">
            <li ng-repeat="preset in presets" on-swipe-left-add-class="swiped">
              <span class="pull-right actions">
                <a href="#" class="btn btn-default" alt="Edit Preset" ng-click="editPreset(preset)">
                  <i class="glyphicon glyphicon-pencil"></i>
                </a>
                <a href="#" class="btn btn-danger" ng-click="deletePreset(preset)">
                  <i class="glyphicon glyphicon-trash"></i>
                </a>
              </span>
              <a href="#" ng-click="loadPreset(preset)">
                <span class="sort-handle">||</span>
                {{preset.title}}
              </a>
            </li>

            <li ng-show="!presets || presets.length < 1" class="empty">
              You haven't created any presets yet.
            </li>
          </ul>
        </div>

        <div class="col-xs-12 col-sm-8 col-sm-offset-4">
          <div style="max-width: 446px; margin: auto;">
            <div class="row">
              <div class="col-xs-6 form-inline">
                <select ng-model="beatsPerMeasure" class="form-control" style="display: inline; width: auto;">
                  <option value="4">4/4</option>
                  <option value="3">3/4</option>
                  <option value="2">2/4</option>
                  <option value="no-emphasis">No Emphasis</option>
                </select>

                <select ng-model="key" class="form-control" style="display: inline; width: auto;">
                  <option value="c">C</option>
                  <option value="c#">C&#9839;</option>
                  <option value="d">D</option>
                  <option value="eb">E&#9837;</option>
                  <option value="e">E</option>
                  <option value="f">F</option>
                  <option value="f#">F&#9839;</option>
                  <option value="g">G</option>
                  <option value="ab">A&#9837;</option>
                  <option value="a">A</option>
                  <option value="bb">B&#9837;</option>
                  <option value="b">B</option>
                  <!-- <option value="tock">Tock</option> -->
                </select>
              </div>

              <div class="col-xs-6 text-right">
                <input type="checkbox"
                  bs-switch
                  mute-switch
                  ng-model="muted"
                  data-on-text="✕"
                  data-off-text="✓"
                  data-on-color="danger"
                  data-handle-width="18"
                  data-label-width="8">
              </div>
              <!-- <button ng-click="sync()">Re-sync</button> -->
            </div> <!-- .row -->

            <div class="row" style="margin-top: 25px;">
              <div class="col-xs-12">
                <div id="tap-wrapper" class="{{beatDisplayClass}} {{beatsPerMeasureDisplayClass}}">
                  <div id="tap-control">
                    <div class="tempo">{{beatsPerMinute | number:1}}</div>
                    <input type="text" class="tempo-edit" value="{{beatsPerMinute | number:1}}" select-on-click>
                    <a href="#" id="tap-button" onclick="event.preventDefault();">Tap</a>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="arcs">
                    <circle cx="165" cy="165" r="150" stroke="black" stroke-width="15" fill="none" />
                    <path class="arc beat-1-4"           fill="none" stroke="#16a6b6" d="M165,15     A150,150 0 0,1 315,165"    stroke-width="15"></path>
                    <path class="arc beat-2-4"           fill="none" stroke="#16a6b6" d="M315,165    A150,150 0 0,1 165,315"    stroke-width="15"></path>
                    <path class="arc beat-3-4"           fill="none" stroke="#16a6b6" d="M165,315    A150,150 0 0,1 15,165"     stroke-width="15"></path>
                    <path class="arc beat-4-4"           fill="none" stroke="#16a6b6" d="M15,165     A150,150 0 0,1 165,15"     stroke-width="15"></path>
                    <path class="arc beat-1-3"           fill="none" stroke="#16a6b6" d="M165,15     A150,150 0 0,1 294.90,240" stroke-width="15"></path>
                    <path class="arc beat-2-3"           fill="none" stroke="#16a6b6" d="M294.90,240 A150,150 0 0,1 35.10,240"  stroke-width="15"></path>
                    <path class="arc beat-3-3"           fill="none" stroke="#16a6b6" d="M35.10,240  A150,150 0 0,1 165,15"     stroke-width="15"></path>
                    <path class="arc beat-1-2"           fill="none" stroke="#16a6b6" d="M165,15     A150,150 0 0,1 165,315"    stroke-width="15"></path>
                    <path class="arc beat-2-2"           fill="none" stroke="#16a6b6" d="M165,315    A150,150 0 0,1 165,15"     stroke-width="15"></path>
                    <path class="arc beat-1-no-emphasis" fill="none" stroke="#16a6b6" d="M165,15     A150,150 0 0,1 315,165"    stroke-width="15"></path>
                    <path class="arc beat-1-no-emphasis" fill="none" stroke="#16a6b6" d="M165,315    A150,150 0 0,1 15,165"     stroke-width="15"></path>
                    <path class="arc beat-2-no-emphasis" fill="none" stroke="#16a6b6" d="M315,165    A150,150 0 0,1 165,315"    stroke-width="15"></path>
                    <path class="arc beat-2-no-emphasis" fill="none" stroke="#16a6b6" d="M15,165     A150,150 0 0,1 165,15"     stroke-width="15"></path>
                  </svg>
                </div> <!-- #tap-wrapper -->
              </div> <!-- .col-xs-12 -->
            </div> <!-- .row -->
          </div>
        </div> <!-- .col-xs-12.col-sm-9 -->
      </div> <!-- .row -->
    </div> <!-- .container-fluid -->
  </div> <!-- ng-show="offset" -->

  <div ng-hide="offset">
    Loading...
  </div>

  <div class="modal fade preset-form-dialog" tabindex="-1" role="dialog" aria-hidden="true" ng-controller="PresetFormController">
    <div class="modal-sm">
      <div class="modal-content">
        <form ng-submit="savePreset()">
          <div class="modal-header">
            <h4 class="modal-title">
              <span ng-hide="presetFormType == 'edit'">Add a Preset</span>
              <span ng-show="presetFormType == 'edit'">Edit Preset</span>
            </h4>
          </div>

          <div class="modal-body">
            <div class="form-group">
              <label>Title</label>
              <input type="text" id="new-title" ng-model="presetEditAfter.title" class="form-control" placeholder="Song Title">
            </div>

            <div class="form-group">
              <label>Tempo</label>
              <input type="tel" ng-model="presetEditAfter.beatsPerMinute" class="form-control" placeholder="100.0">
            </div>

            <div class="form-group">
              <label>Time Signature</label>
              <select ng-model="presetEditAfter.beatsPerMeasure" class="form-control">
                <option value="4">4/4</option>
                <option value="3">3/4</option>
                <option value="2">2/4</option>
                <option value="no-emphasis">No Emphasis</option>
              </select>
            </div>

            <div class="form-group">
              <label>Key</label>
              <select ng-model="presetEditAfter.key" class="form-control">
                <option value="c">C</option>
                <option value="c#">C&#9839;</option>
                <option value="d">D</option>
                <option value="eb">E&#9837;</option>
                <option value="e">E</option>
                <option value="f">F</option>
                <option value="f#">F&#9839;</option>
                <option value="g">G</option>
                <option value="ab">A&#9837;</option>
                <option value="a">A</option>
                <option value="bb">B&#9837;</option>
                <option value="b">B</option>
                <!-- <option value="tock">Tock</option> -->
              </select>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

